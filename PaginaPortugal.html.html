<DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="C:\Users\sandra\Documents\luci\SeminarioFinal\Paginas secundarias de la principal\imagenes.css">
    <title>Guía Turística de Portugal</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>

    <style>
        body {
            background-color: #f8f9fa;
            font-family: Arial, sans-serif;
        }
        #map {
            height: 400px;
            width: 100%;
            margin: 20px 0;
        } 
        .container {
            max-width: 1200px;
            margin: auto;
            padding: 20px;
        }
        h1, h2 {
            text-align: center;
            color: #343a40;
        }
        ul {
            list-style-type: none;
            padding: 0;
        }
        li {
            margin: 10px 0;
        }
        a {
            text-decoration: none;
            color: #007bff;
        }
        a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>

<div class="container">
    <h1 id="country-name">Portugal</h1>
    <img id="country-flag" src="" alt="Bandera de Portugal" class="img-fluid mb-3">
    <p><strong>Moneda:</strong> <span id="currency"></span></p>
    <p><strong>Cantidad de Habitantes:</strong> <span id="population"></span></p>
    <p><strong>Capital:</strong> <span id="capital"></span></p>
    <p><strong>Área:</strong> <span id="area"></span></p>
    <p><strong>Idioma oficial:</strong> <span id="language"></span></p>

    <h2>Mapa del País</h2> 
    <div id="map"></div>

    <h2>Atracciones Turísticas</h2>
    <ul id="attractions-list" class="list-group">
        <!-- Lista de atracciones -->
        <li class="list-group-item"><a href="#" onclick="focusOnAttraction(38.71667, -9.13933, 'Paginas secundarias de la principal/Lisboa.html')">Atracción 1: Lisboa</a></li>
        <li class="list-group-item"><a href="#" onclick="focusOnAttraction(41.14961, -8.61099, 'Paginas secundarias de la principal/Oporto.html')">Atracción 2: Oporto</a></li>
        <li class="list-group-item"><a href="#" onclick="focusOnAttraction(38.78935, -9.39425, 'Paginas secundarias de la principal/Sintra.html')">Atracción 3: Sintra</a></li>
        <li class="list-group-item"><a href="#" onclick="focusOnAttraction(38.6977, -9.4208, 'Paginas secundarias de la principal/Cascais.html')">Atracción 4: Cascais</a></li>
        <li class="list-group-item"><a href="#" onclick="focusOnAttraction(37.0174, -8.2470, 'Paginas secundarias de la principal/ElAlgarve.html')">Atracción 5: El Algarve</a></li>
    </ul>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

<script>
// Variables globales
let map;
let markers = []; // Array para almacenar los marcadores

// Lógica para cargar datos de la API RestCountries
$(document).ready(function() {
    $.get('https://restcountries.com/v3.1/name/portugal', function(data) {
        const country = data[0];
        
        // Asignar valores a los elementos HTML
        $('#country-flag').attr('src', country.flags.png);
        $('#currency').text(country.currencies[Object.keys(country.currencies)[0]].name);
        $('#population').text(country.population.toLocaleString());
        
        // Capital en español
        $('#capital').text("Lisboa"); // Se establece manualmente
        
        // Área
        $('#area').text(country.area.toLocaleString() + " km²");
        
        // Idioma en español
        $('#language').text("Portugués"); // Se establece manualmente

        // Inicializar el mapa después de cargar los datos
        initMap();
    });
});

// Inicializar el mapa usando Leaflet
function initMap() {
    const portugalLocation = [39.399872, -8.224454]; // Coordenadas de Portugal
    map = L.map('map').setView(portugalLocation, 6); // Crear el mapa y centrarlo en Portugal

    // Capa de OpenStreetMap
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: '© OpenStreetMap'
    }).addTo(map);

    // Marcadores para las atracciones
    const attractions = [
        { name: "Lisboa", location: [38.71667, -9.13933] },
        { name: "Oporto", location: [41.14961, -8.61099] },
        { name: "Sintra", location: [38.78935, -9.39425] },
        { name: "Cascais", location: [38.6977, -9.4208] },
        { name: "El Algarve", location: [37.0174, -8.2470] },
    ];

    attractions.forEach(attraction => {
        const marker = L.marker(attraction.location).addTo(map);
        marker.bindPopup(attraction.name); // Popup con el nombre de la atracción
        markers.push(marker); // Almacenar el marcador en el array
    });
}

// Función para centrar el mapa en una atracción específica
function focusOnAttraction(lat, lng, url) {
    const attractionLocation = [lat, lng];
   map.setView(attractionLocation, 10); 
    
   markers.forEach(marker => marker.remove()); // Eliminar todos los marcadores del mapa
    
   const newMarker = L.marker(attractionLocation).addTo(map);
   newMarker.bindPopup("Atracción seleccionada").openPopup();

   setTimeout(() => {
       if (confirm("¿Deseas abrir la página con información turística sobre esta atracción?")) {
           window.open(url, "_blank");
       } 
   }, 2000);
}
</script>

</body>
</html>
